<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>L·ªõp H·ªçc Vui V·∫ª - B√†i 22 Kh·ªüi ƒê·ªông</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>

    <!-- Babel Standalone ƒë·ªÉ bi√™n d·ªãch JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      @keyframes bounce {
        0%,
        100% {
          transform: translateY(-5%);
          animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
        }
        50% {
          transform: translateY(0);
          animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
        }
      }

      .animate-bounce {
        animation: bounce 1s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .animate-spin {
        animation: spin 1s linear infinite;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Lucide Icons as React components
      const Icon = ({ name, size = 24, className = "", ...props }) => {
        useEffect(() => {
          lucide.createIcons();
        });
        return React.createElement("i", {
          "data-lucide": name,
          className: className,
          style: { width: size, height: size },
          ...props,
        });
      };

      // --- C·∫§U H√åNH FIREBASE ---
      const firebaseConfig = {
        apiKey: "AIzaSyAdReswIvvAgfUUIdZ1H2BnJT55cDLPbHo",
        authDomain: "bai22-list-khoidong.firebaseapp.com",
        databaseURL:
          "https://bai22-list-khoidong-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "bai22-list-khoidong",
        storageBucket: "bai22-list-khoidong.firebasestorage.app",
        messagingSenderId: "434895363112",
        appId: "1:434895363112:web:6301f01d9f1eec1589e91d",
        measurementId: "G-B6VK3ETMSK",
      };

      // Kh·ªüi t·∫°o Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();
      const auth = firebase.auth();

      // --- COMPONENT CH√çNH ---
      const ListVsVars = () => {
        const ITEM_COUNT = 30;

        // --- STATE ---
        const [user, setUser] = useState(null);
        const [studentName, setStudentName] = useState("");
        const [isStudentLoggedIn, setIsStudentLoggedIn] = useState(false);
        const [view, setView] = useState("welcome");

        // Game Data
        const [scores, setScores] = useState([]);
        const [leftSelected, setLeftSelected] = useState(new Set());
        const [rightStatus, setRightStatus] = useState("idle");
        const [message, setMessage] = useState("");
        const [startTime, setStartTime] = useState(null);

        const [hasSubmitted, setHasSubmitted] = useState(false);
        const [isSubmitting, setIsSubmitting] = useState(false);

        // Firebase Data Listeners
        const [gameStatus, setGameStatus] = useState({
          isActive: false,
          taskData: [],
        });
        const [submissions, setSubmissions] = useState([]);
        const [permissionError, setPermissionError] = useState(false);

        // State ƒë·ªÉ ·∫©n/hi·ªán ƒë√°p √°n khi chi·∫øu m√†n h√¨nh
        const [showAnswer, setShowAnswer] = useState(true);

        // State cho ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c
        const [timerDuration, setTimerDuration] = useState(300); // 5 ph√∫t m·∫∑c ƒë·ªãnh (gi√¢y)
        const [timeRemaining, setTimeRemaining] = useState(null);
        const [timerEndTime, setTimerEndTime] = useState(null);

        // State cho 2 b∆∞·ªõc game
        const [gameStep, setGameStep] = useState(1); // 1 = t·∫°o bi·∫øn, 2 = ch·ªçn s·ªë
        const [createdBoxes, setCreatedBoxes] = useState([]); // M·∫£ng c√°c bi·∫øn ƒë√£ t·∫°o: [{value: null}, {value: 5}, ...]
        const [usedScoreIndices, setUsedScoreIndices] = useState(new Set()); // C√°c index s·ªë ƒë√£ g√°n

        // State cho admin demo
        const [adminStep, setAdminStep] = useState(1); // B∆∞·ªõc demo cho admin

        // --- INITIALIZATION ---
        useEffect(() => {
          const unsubscribeAuth = auth.onAuthStateChanged((u) => {
            if (u) {
              setUser(u);
              setView("admin_dashboard");
            }
          });

          const unsubGame = db.doc("config/gameState").onSnapshot(
            (doc) => {
              setPermissionError(false);
              if (doc.exists) {
                const data = doc.data();
                setGameStatus(data);
                if (!user && isStudentLoggedIn) {
                  if (data.isActive) {
                    if (hasSubmitted) {
                      if (view !== "student_done") setView("student_done");
                    } else {
                      if (scores.length === 0 || view === "student_wait") {
                        setScores(data.generatedScores || []);
                        setStartTime(Date.now());
                      }
                      if (view !== "student_game") setView("student_game");
                    }
                  } else {
                    setView("student_wait");
                    setLeftSelected(new Set());
                    setHasSubmitted(false);
                    setIsSubmitting(false);
                    setScores([]);
                    setGameStep(1);
                    setCreatedBoxes([]);
                    setUsedScoreIndices(new Set());
                  }
                }
              }
            },
            (error) => {
              console.error("L·ªói config:", error);
              if (error.code === "permission-denied") setPermissionError(true);
            }
          );

          return () => {
            unsubscribeAuth();
            unsubGame();
          };
        }, [user, isStudentLoggedIn, view, scores.length, hasSubmitted]);

        useEffect(() => {
          if (user) {
            const unsubSub = db.collection("submissions").onSnapshot(
              (snapshot) => {
                const subs = snapshot.docs.map((d) => ({
                  id: d.id,
                  ...d.data(),
                }));
                subs.sort((a, b) => {
                  if (b.score !== a.score) {
                    return b.score - a.score;
                  }
                  return a.duration - b.duration;
                });
                setSubmissions(subs);
              },
              (error) => console.error("L·ªói submissions:", error)
            );
            return () => unsubSub();
          }
        }, [user]);

        // ƒê·∫øm ng∆∞·ª£c th·ªùi gian
        useEffect(() => {
          if (gameStatus.timerEndTime && gameStatus.isActive) {
            const interval = setInterval(() => {
              const now = Date.now();
              const remaining = Math.max(
                0,
                Math.floor((gameStatus.timerEndTime - now) / 1000)
              );
              setTimeRemaining(remaining);

              // T·ª± ƒë·ªông k·∫øt th√∫c game khi h·∫øt gi·ªù
              if (remaining === 0 && user) {
                toggleGameActive();
              }
            }, 100);

            return () => clearInterval(interval);
          } else {
            setTimeRemaining(null);
          }
        }, [gameStatus.timerEndTime, gameStatus.isActive, user]);

        // --- ADMIN FUNCTIONS ---
        const handleAdminLogin = async (e) => {
          e.preventDefault();
          const email = e.target.email.value;
          const password = e.target.password.value;
          try {
            await auth.signInWithEmailAndPassword(email, password);
          } catch (error) {
            alert("L·ªói ƒëƒÉng nh·∫≠p: " + error.message);
          }
        };

        const toggleGameActive = async () => {
          try {
            const newActiveState = !gameStatus.isActive;

            let newScores = gameStatus.generatedScores;
            if (newActiveState) {
              newScores = Array.from(
                { length: ITEM_COUNT },
                () => Math.floor(Math.random() * 10) + 1
              );

              const snapshot = await db.collection("submissions").get();
              const deletePromises = snapshot.docs.map((doc) =>
                doc.ref.delete()
              );
              await Promise.all(deletePromises);
            }

            await db.doc("config/gameState").set({
              isActive: newActiveState,
              generatedScores: newScores || [],
              timerEndTime: newActiveState
                ? Date.now() + timerDuration * 1000
                : null,
              updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
            });

            if (newActiveState) {
              setScores(newScores);
            }
          } catch (error) {
            alert("L·ªói c·∫≠p nh·∫≠t tr·∫°ng th√°i game: " + error.message);
          }
        };

        // --- STUDENT FUNCTIONS ---
        const handleStudentJoin = (e) => {
          e.preventDefault();
          if (studentName.trim()) {
            setIsStudentLoggedIn(true);
            if (gameStatus.isActive) {
              setScores(gameStatus.generatedScores);
              setView("student_game");
              setStartTime(Date.now());
              setGameStep(1);
              setCreatedBoxes([]);
              setUsedScoreIndices(new Set());
            } else {
              setView("student_wait");
            }
          }
        };

        const handleBackToWelcome = () => {
          setIsStudentLoggedIn(false);
          setView("welcome");
          setHasSubmitted(false);
          setIsSubmitting(false);
          setGameStep(1);
          setCreatedBoxes([]);
          setUsedScoreIndices(new Set());
        };

        const handleStudentSubmit = async () => {
          if (hasSubmitted || isSubmitting) return;
          setIsSubmitting(true);

          if (!startTime) {
            setIsSubmitting(false);
            return;
          }
          const duration = (Date.now() - startTime) / 1000;

          // T√≠nh ƒëi·ªÉm: ƒë√∫ng - sai (ƒë·ªÉ tr√°nh h·ªçc sinh ch·ªçn t·∫•t c·∫£)
          let correctSelections = 0;
          let wrongSelections = 0;

          leftSelected.forEach((idx) => {
            if (scores[idx] > 7) {
              correctSelections++; // Ch·ªçn ƒë√∫ng: th√πng c√≥ > 7 qu·∫£
            } else {
              wrongSelections++; // Ch·ªçn sai: th√πng c√≥ <= 7 qu·∫£
            }
          });

          // ƒêi·ªÉm = s·ªë ƒë√∫ng - s·ªë sai (kh√¥ng cho ƒëi·ªÉm √¢m)
          const actualScore = Math.max(0, correctSelections - wrongSelections);

          try {
            await db.collection("submissions").add({
              name: studentName,
              score: actualScore,
              duration: duration,
              submittedAt: firebase.firestore.FieldValue.serverTimestamp(),
            });

            setHasSubmitted(true);
            setView("student_done");
          } catch (error) {
            console.error("L·ªói n·ªôp b√†i:", error);
            alert("L·ªói n·ªôp b√†i: " + error.message);
            setIsSubmitting(false);
          }
        };

        // --- GAME LOGIC ---
        // B∆∞·ªõc 1: X·∫øp cam v√†o th√πng (t∆∞∆°ng ƒë∆∞∆°ng vi·ªác t·∫°o bi·∫øn v√† g√°n gi√° tr·ªã)
        const handleAddBox = () => {
          if (hasSubmitted || isSubmitting) return;
          setCreatedBoxes([...createdBoxes, { value: null, scoreIndex: null }]);
        };

        const handleScoreClick = (scoreIndex) => {
          if (hasSubmitted || isSubmitting || usedScoreIndices.has(scoreIndex))
            return;

          // T√¨m h·ªôp tr·ªëng ƒë·∫ßu ti√™n
          const emptyBoxIndex = createdBoxes.findIndex(
            (box) => box.value === null
          );
          if (emptyBoxIndex === -1) {
            setMessage("‚ö†Ô∏è Kh√¥ng c√≤n th√πng tr·ªëng! H√£y th√™m th√πng m·ªõi.");
            return;
          }

          // G√°n gi√° tr·ªã v√†o h·ªôp
          const newBoxes = [...createdBoxes];
          newBoxes[emptyBoxIndex] = {
            value: gameStatus.generatedScores[scoreIndex],
            scoreIndex,
          };
          setCreatedBoxes(newBoxes);
          setUsedScoreIndices(new Set([...usedScoreIndices, scoreIndex]));
          setMessage("");
        };

        const handleFinishCreating = () => {
          if (createdBoxes.length === 0) {
            setMessage("‚ö†Ô∏è H√£y t·∫°o √≠t nh·∫•t 1 th√πng tr∆∞·ªõc!");
            return;
          }
          setGameStep(2);
          setMessage("");
          // Chuy·ªÉn createdBoxes th√†nh m·∫£ng gi√° tr·ªã cho b∆∞·ªõc 2
          const values = createdBoxes.map((box) =>
            box.value !== null ? box.value : 0
          );
          setScores(values);
          setStartTime(Date.now());
        };

        const handleResetStep1 = () => {
          setCreatedBoxes([]);
          setUsedScoreIndices(new Set());
          setMessage("");
        };

        const handleRemoveBox = () => {
          if (hasSubmitted || isSubmitting || createdBoxes.length === 0) return;

          // X√≥a th√πng cu·ªëi c√πng
          const lastBox = createdBoxes[createdBoxes.length - 1];
          const newBoxes = createdBoxes.slice(0, -1);

          // N·∫øu th√πng b·ªã x√≥a c√≥ gi√° tr·ªã, tr·∫£ l·∫°i r·ªï cam
          if (lastBox.scoreIndex !== null) {
            const newUsedIndices = new Set(usedScoreIndices);
            newUsedIndices.delete(lastBox.scoreIndex);
            setUsedScoreIndices(newUsedIndices);
          }

          setCreatedBoxes(newBoxes);
          setMessage("");
        };

        // B∆∞·ªõc 2: Ch·ªçn th√πng c√≥ nhi·ªÅu cam (logic ch·ªçn c√°c gi√° tr·ªã > 7)
        const handleLeftClick = (index, val) => {
          if (hasSubmitted || isSubmitting) return;

          const newSet = new Set(leftSelected);
          if (newSet.has(index)) {
            newSet.delete(index);
          } else {
            newSet.add(index);
          }
          setLeftSelected(newSet);
          setMessage("");
        };

        const handleRightAction = () => {
          setRightStatus("processing");
          setTimeout(() => {
            const count = scores.filter((score) => score > 7).length;
            setRightStatus("done");
            setMessage(`üçä T√¨m th·∫•y ${count} th√πng c√≥ nhi·ªÅu h∆°n 7 qu·∫£!`);
          }, 800);
        };

        // --- RENDER ---
        if (permissionError) {
          return (
            <div className="min-h-screen bg-red-50 flex flex-col items-center justify-center p-4 text-center">
              <Icon
                name="alert-triangle"
                size={64}
                className="text-red-600 mb-4"
              />
              <h2 className="text-2xl font-bold text-red-800 mb-2">
                L·ªói Quy·ªÅn Truy C·∫≠p (Permission Denied)
              </h2>
              <p>Vui l√≤ng c·∫≠p nh·∫≠t Rules trong Firebase Console.</p>
              <button
                onClick={() => window.location.reload()}
                className="mt-4 bg-red-600 text-white py-2 px-4 rounded font-bold"
              >
                T·∫£i l·∫°i trang
              </button>
            </div>
          );
        }

        if (view === "welcome") {
          return (
            <div className="min-h-screen bg-blue-50 flex items-center justify-center p-4">
              <div className="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full border-t-4 border-blue-600">
                <h1 className="text-3xl font-bold text-center text-blue-800 mb-6">
                  L·ªõp H·ªçc Vui V·∫ª
                </h1>
                <div className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      H·ªçc sinh nh·∫≠p t√™n:
                    </label>
                    <form onSubmit={handleStudentJoin} className="flex gap-2">
                      <input
                        type="text"
                        className="flex-1 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none"
                        placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn An"
                        value={studentName}
                        onChange={(e) => setStudentName(e.target.value)}
                        required
                      />
                      <button
                        type="submit"
                        className="bg-green-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-700"
                      >
                        V√†o L·ªõp
                      </button>
                    </form>
                  </div>
                  <div className="relative flex py-2 items-center">
                    <div className="flex-grow border-t border-gray-300"></div>
                    <span className="flex-shrink-0 mx-4 text-gray-400 text-xs">
                      D√ÄNH CHO GI√ÅO VI√äN
                    </span>
                    <div className="flex-grow border-t border-gray-300"></div>
                  </div>
                  <form
                    onSubmit={handleAdminLogin}
                    className="space-y-3 bg-gray-50 p-4 rounded-lg"
                  >
                    <input
                      name="email"
                      type="email"
                      placeholder="Email gi√°o vi√™n"
                      className="w-full border p-2 rounded text-sm"
                    />
                    <input
                      name="password"
                      type="password"
                      placeholder="M·∫≠t kh·∫©u"
                      className="w-full border p-2 rounded text-sm"
                    />
                    <button
                      type="submit"
                      className="w-full bg-blue-600 text-white py-2 rounded font-bold text-sm hover:bg-blue-700"
                    >
                      ƒêƒÉng nh·∫≠p Admin
                    </button>
                  </form>
                </div>
              </div>
            </div>
          );
        }

        if (view === "student_wait") {
          return (
            <div className="min-h-screen bg-yellow-50 flex flex-col items-center justify-center p-4">
              <div className="max-w-4xl w-full">
                <div className="text-center mb-8">
                  <div className="animate-bounce mb-4 inline-block">
                    <Icon name="clock" size={64} className="text-yellow-600" />
                  </div>
                  <h2 className="text-2xl font-bold text-gray-800 mb-2">
                    Xin ch√†o, {studentName}!
                  </h2>
                  <p className="text-gray-600">
                    Vui l√≤ng ch·ªù gi√°o vi√™n m·ªü kh√≥a b√†i t·∫≠p...
                  </p>
                  <p className="text-xs text-gray-400 mt-2">
                    (M√†n h√¨nh s·∫Ω t·ª± ƒë·ªông chuy·ªÉn khi game b·∫Øt ƒë·∫ßu)
                  </p>
                </div>

                {/* ƒê·ªÅ b√†i ƒë·ªÉ h·ªçc sinh ƒë·ªçc tr∆∞·ªõc */}
                <div className="bg-gradient-to-r from-orange-50 to-yellow-50 p-6 rounded-xl shadow-lg border-2 border-orange-300 mb-6">
                  <div className="flex items-start gap-4">
                    <div className="text-5xl">üßë‚Äçüåæ</div>
                    <div className="flex-1">
                      <h2 className="text-2xl font-bold text-orange-800 mb-3 flex items-center gap-2">
                        <Icon
                          name="package"
                          size={28}
                          className="text-orange-600"
                        />
                        C√¢u chuy·ªán b√°c H√πng b√°n cam
                      </h2>
                      <p className="text-gray-700 leading-relaxed text-base">
                        B√°c H√πng c√≥{" "}
                        <strong className="text-orange-600">30 r·ªï cam</strong>{" "}
                        c·∫ßn x·∫øp v√†o{" "}
                        <strong className="text-orange-600">c√°c th√πng</strong>{" "}
                        ƒë·ªÉ chu·∫©n b·ªã ƒëem b√°n. M·ªói r·ªï cam c√≥ s·ªë l∆∞·ª£ng qu·∫£ kh√°c
                        nhau t·ª´ 1 ƒë·∫øn 10 qu·∫£.
                      </p>
                      <div className="mt-3 p-3 bg-white rounded-lg border-l-4 border-orange-500">
                        <p className="font-bold text-orange-700 mb-2">
                          üìã Nhi·ªám v·ª• c·ªßa b·∫°n:
                        </p>
                        <ul className="space-y-1 text-gray-700 text-sm">
                          <li className="flex items-start gap-2">
                            <span className="text-blue-600 font-bold">1Ô∏è‚É£</span>
                            <span>
                              <strong>X·∫øp cam:</strong> T·∫°o th√πng v√† cho r·ªï cam
                              v√†o th√πng
                            </span>
                          </li>
                          <li className="flex items-start gap-2">
                            <span className="text-green-600 font-bold">2Ô∏è‚É£</span>
                            <span>
                              <strong>Ch·ªçn b√°n:</strong> Ch·ªçn c√°c th√πng c√≥{" "}
                              <strong className="text-green-600">
                                nhi·ªÅu h∆°n 7 qu·∫£ cam
                              </strong>{" "}
                              ƒë·ªÉ b√°n tr∆∞·ªõc
                            </span>
                          </li>
                        </ul>
                      </div>
                      <div className="mt-3 text-center">
                        <span className="inline-flex items-center px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-bold animate-pulse">
                          ‚è≥ S·∫µn s√†ng khi gi√°o vi√™n b·∫Øt ƒë·∫ßu!
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="text-center">
                  <button
                    onClick={handleBackToWelcome}
                    className="inline-flex items-center gap-2 text-gray-500 hover:text-blue-600 transition-colors px-4 py-2 rounded hover:bg-blue-50"
                  >
                    <Icon name="arrow-left" size={16} />
                    <span>Quay l·∫°i s·ª≠a t√™n</span>
                  </button>
                </div>
              </div>
            </div>
          );
        }

        if (view === "student_done") {
          return (
            <div className="min-h-screen bg-green-50 flex flex-col items-center justify-center p-4 text-center">
              <Icon name="check" size={80} className="text-green-600 mb-4" />
              <h2 className="text-3xl font-bold text-green-800 mb-2">
                ƒê√£ N·ªôp B√†i!
              </h2>
              <p className="text-gray-600 mb-6">
                K·∫øt qu·∫£ c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn m√°y gi√°o vi√™n.
              </p>

              <div className="p-4 bg-white rounded-lg shadow-sm text-sm text-gray-500 max-w-xs mx-auto">
                <p className="flex items-center justify-center gap-2">
                  <Icon name="lock" size={16} />
                  B·∫°n kh√¥ng th·ªÉ ch·ªânh s·ª≠a ƒë√°p √°n sau khi ƒë√£ n·ªôp.
                </p>
                <p className="mt-2 text-xs italic">
                  H√£y theo d√µi b·∫£ng x·∫øp h·∫°ng tr√™n m√†n h√¨nh c·ªßa gi√°o vi√™n nh√©!
                </p>
              </div>
            </div>
          );
        }

        const isAdmin = view === "admin_dashboard";
        const canSubmit = !isAdmin && leftSelected.size > 0 && !hasSubmitted;

        return (
          <div className="min-h-screen bg-gray-50 p-4 font-sans text-gray-800">
            <header className="max-w-7xl mx-auto mb-6">
              <div className="flex justify-between items-center bg-white p-4 rounded-lg shadow-md border-l-4 border-blue-600">
                <div>
                  <h1 className="text-2xl font-bold text-blue-900 flex items-center gap-2">
                    <Icon
                      name="user"
                      className={isAdmin ? "text-blue-600" : "text-green-600"}
                    />
                    {isAdmin
                      ? "Giao di·ªán Gi√°o Vi√™n"
                      : `H·ªçc sinh: ${studentName}`}
                  </h1>
                  <p className="text-sm text-gray-500">
                    {isAdmin
                      ? "Qu·∫£n l√Ω l·ªõp h·ªçc v√† theo d√µi k·∫øt qu·∫£"
                      : "T√¨m c√°c th√πng c√≥ > 7 qu·∫£ cam v√† n·ªôp b√†i!"}
                  </p>
                </div>

                <div className="flex gap-3">
                  {isAdmin && (
                    <>
                      <button
                        onClick={toggleGameActive}
                        className={`px-6 py-2 rounded-full font-bold shadow-lg flex items-center gap-2 transition-all ${
                          gameStatus.isActive
                            ? "bg-red-500 hover:bg-red-600 text-white animate-pulse"
                            : "bg-green-600 hover:bg-green-700 text-white"
                        }`}
                      >
                        <Icon
                          name={gameStatus.isActive ? "lock" : "play"}
                          size={18}
                        />
                        {gameStatus.isActive ? "K·∫æT TH√öC" : "B·∫ÆT ƒê·∫¶U GAME"}
                      </button>
                      <button
                        onClick={() => setShowAnswer(!showAnswer)}
                        className={`px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-all ${
                          showAnswer
                            ? "bg-blue-600 hover:bg-blue-700 text-white"
                            : "bg-gray-400 hover:bg-gray-500 text-white"
                        }`}
                        title={
                          showAnswer ? "·∫®n ƒë√°p √°n khi chi·∫øu" : "Hi·ªán ƒë√°p √°n"
                        }
                      >
                        <Icon name={showAnswer ? "eye-off" : "eye"} size={18} />
                        {showAnswer ? "·∫®N" : "HI·ªÜN"}
                      </button>
                      <button
                        onClick={() =>
                          auth.signOut().then(() => setView("welcome"))
                        }
                        className="bg-gray-200 p-2 rounded hover:bg-gray-300"
                      >
                        Tho√°t
                      </button>
                    </>
                  )}

                  {!isAdmin && (
                    <button
                      onClick={handleStudentSubmit}
                      disabled={!canSubmit || isSubmitting}
                      className={`
                      px-8 py-3 rounded-lg font-bold shadow-xl flex items-center gap-2 transition-all
                      ${
                        isSubmitting || !canSubmit
                          ? "bg-gray-400 cursor-not-allowed text-gray-100"
                          : "bg-green-600 hover:bg-green-700 text-white animate-bounce"
                      }
                    `}
                    >
                      {isSubmitting ? (
                        <>
                          <Icon
                            name="loader-2"
                            size={24}
                            className="animate-spin"
                          />{" "}
                          ƒêANG G·ª¨I...
                        </>
                      ) : (
                        <>
                          <Icon name="check" size={24} /> N·ªòP B√ÄI NGAY (
                          {leftSelected.size} th√πng)
                        </>
                      )}
                    </button>
                  )}
                </div>
              </div>
            </header>

            {/* ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c - Ch·ªâ hi·ªÉn th·ªã cho Admin */}
            {isAdmin && gameStatus.isActive && timeRemaining !== null && (
              <div className="max-w-7xl mx-auto mb-6">
                <div
                  className={`p-4 rounded-xl shadow-lg text-center ${
                    timeRemaining <= 30
                      ? "bg-red-100 border-2 border-red-400 animate-pulse"
                      : timeRemaining <= 60
                      ? "bg-orange-100 border-2 border-orange-400"
                      : "bg-blue-100 border-2 border-blue-400"
                  }`}
                >
                  <div className="flex items-center justify-center gap-3">
                    <Icon
                      name="timer"
                      size={32}
                      className={
                        timeRemaining <= 30
                          ? "text-red-600"
                          : timeRemaining <= 60
                          ? "text-orange-600"
                          : "text-blue-600"
                      }
                    />
                    <div>
                      <div className="text-sm font-medium text-gray-600">
                        Th·ªùi gian c√≤n l·∫°i
                      </div>
                      <div
                        className={`text-4xl font-bold font-mono ${
                          timeRemaining <= 30
                            ? "text-red-700"
                            : timeRemaining <= 60
                            ? "text-orange-700"
                            : "text-blue-700"
                        }`}
                      >
                        {Math.floor(timeRemaining / 60)}:
                        {String(timeRemaining % 60).padStart(2, "0")}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* Panel c√†i ƒë·∫∑t timer cho admin */}
            {isAdmin && !gameStatus.isActive && (
              <div className="max-w-7xl mx-auto mb-6">
                <div className="bg-white p-4 rounded-xl shadow-lg border-2 border-purple-300">
                  <div className="flex items-center gap-4 justify-center flex-wrap">
                    <Icon name="clock" size={24} className="text-purple-600" />
                    <span className="font-bold text-gray-700">
                      Th·ªùi gian l√†m b√†i:
                    </span>
                    <input
                      type="number"
                      min="30"
                      max="3600"
                      step="30"
                      value={timerDuration}
                      onChange={(e) =>
                        setTimerDuration(parseInt(e.target.value) || 300)
                      }
                      className="border-2 border-purple-300 rounded-lg px-4 py-2 w-24 text-center font-mono font-bold text-lg focus:ring-2 focus:ring-purple-500 outline-none"
                    />
                    <span className="text-gray-600">gi√¢y</span>
                    <span className="text-sm text-gray-500">
                      ({Math.floor(timerDuration / 60)} ph√∫t{" "}
                      {timerDuration % 60} gi√¢y)
                    </span>
                    <button
                      onClick={() => setTimerDuration(60)}
                      className="px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded text-xs font-medium"
                    >
                      1 ph√∫t
                    </button>
                    <button
                      onClick={() => setTimerDuration(180)}
                      className="px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded text-xs font-medium"
                    >
                      3 ph√∫t
                    </button>
                    <button
                      onClick={() => setTimerDuration(300)}
                      className="px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded text-xs font-medium"
                    >
                      5 ph√∫t
                    </button>
                    <button
                      onClick={() => setTimerDuration(600)}
                      className="px-3 py-1 bg-purple-100 hover:bg-purple-200 rounded text-xs font-medium"
                    >
                      10 ph√∫t
                    </button>
                  </div>
                </div>
              </div>
            )}

            {isAdmin && (
              <div className="max-w-7xl mx-auto mb-8 grid grid-cols-1 md:grid-cols-3 gap-6">
                <div className="md:col-span-3 bg-white p-6 rounded-xl shadow-lg border border-yellow-200">
                  <div className="flex justify-between items-center mb-4">
                    <h2 className="text-xl font-bold text-yellow-700 flex items-center gap-2">
                      <Icon name="trophy" className="text-yellow-500" /> üèÜ B·∫£ng
                      X·∫øp H·∫°ng (S·∫Øp x·∫øp theo ƒêi·ªÉm cao {">"} Th·ªùi gian nhanh)
                    </h2>
                  </div>

                  {submissions.length === 0 ? (
                    <div className="text-center py-8 text-gray-400 italic bg-gray-50 rounded-lg">
                      Ch∆∞a c√≥ h·ªçc sinh n√†o n·ªôp b√†i...
                    </div>
                  ) : (
                    <div className="overflow-x-auto">
                      <table className="w-full text-left">
                        <thead className="bg-yellow-50 text-yellow-800 uppercase text-xs font-bold">
                          <tr>
                            <th className="px-4 py-3 rounded-tl-lg">H·∫°ng</th>
                            <th className="px-4 py-3">T√™n H·ªçc Sinh</th>
                            <th className="px-4 py-3">S·ªë th√πng ƒë√∫ng üß∫</th>
                            <th className="px-4 py-3">Th·ªùi gian</th>
                            <th className="px-4 py-3 rounded-tr-lg">
                              Tr·∫°ng th√°i
                            </th>
                          </tr>
                        </thead>
                        <tbody className="divide-y divide-gray-100">
                          {submissions.map((sub, idx) => (
                            <tr
                              key={sub.id}
                              className={
                                idx < 3 ? "bg-yellow-50/50 font-medium" : ""
                              }
                            >
                              <td className="px-4 py-3">
                                {idx === 0
                                  ? "ü•á"
                                  : idx === 1
                                  ? "ü•à"
                                  : idx === 2
                                  ? "ü•â"
                                  : idx + 1}
                              </td>
                              <td className="px-4 py-3 text-gray-900">
                                {sub.name}
                              </td>
                              <td className="px-4 py-3">
                                <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                  {sub.score} th√πng ƒë√∫ng
                                </span>
                              </td>
                              <td className="px-4 py-3 font-mono text-gray-600">
                                {sub.duration.toFixed(2)}s
                              </td>
                              <td className="px-4 py-3 text-green-600 text-xs font-bold">
                                HO√ÄN TH√ÄNH
                              </td>
                            </tr>
                          ))}
                        </tbody>
                      </table>
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* ƒê·ªÅ b√†i */}
            <div className="max-w-7xl mx-auto mb-6">
              <div className="bg-gradient-to-r from-orange-50 to-yellow-50 p-6 rounded-xl shadow-lg border-2 border-orange-300">
                <div className="flex items-start gap-4">
                  <div className="text-5xl">üßë‚Äçüåæ</div>
                  <div className="flex-1">
                    <h2 className="text-2xl font-bold text-orange-800 mb-3 flex items-center gap-2">
                      <Icon
                        name="package"
                        size={28}
                        className="text-orange-600"
                      />
                      C√¢u chuy·ªán b√°c H√πng b√°n cam
                    </h2>
                    <p className="text-gray-700 leading-relaxed text-base">
                      B√°c H√πng c√≥{" "}
                      <strong className="text-orange-600">30 r·ªï cam</strong> c·∫ßn
                      x·∫øp v√†o{" "}
                      <strong className="text-orange-600">c√°c th√πng</strong> ƒë·ªÉ
                      chu·∫©n b·ªã ƒëem b√°n. M·ªói r·ªï cam c√≥ s·ªë l∆∞·ª£ng qu·∫£ kh√°c nhau t·ª´
                      1 ƒë·∫øn 10 qu·∫£.
                    </p>
                    <div className="mt-3 p-3 bg-white rounded-lg border-l-4 border-orange-500">
                      <p className="font-bold text-orange-700 mb-2">
                        üìã Nhi·ªám v·ª• c·ªßa b·∫°n:
                      </p>
                      <ul className="space-y-1 text-gray-700 text-sm">
                        <li className="flex items-start gap-2">
                          <span className="text-blue-600 font-bold">1Ô∏è‚É£</span>
                          <span>
                            <strong>X·∫øp cam:</strong> T·∫°o th√πng v√† cho r·ªï cam
                            v√†o th√πng
                          </span>
                        </li>
                        <li className="flex items-start gap-2">
                          <span className="text-green-600 font-bold">2Ô∏è‚É£</span>
                          <span>
                            <strong>Ch·ªçn b√°n:</strong> Ch·ªçn c√°c th√πng c√≥{" "}
                            <strong className="text-green-600">
                              nhi·ªÅu h∆°n 7 qu·∫£ cam
                            </strong>{" "}
                            ƒë·ªÉ b√°n tr∆∞·ªõc
                          </span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              className={`max-w-7xl mx-auto grid gap-8 ${
                isAdmin && showAnswer
                  ? "grid-cols-1 md:grid-cols-2"
                  : "grid-cols-1"
              }`}
            >
              <div className="bg-white rounded-xl shadow-lg border-2 border-dashed border-red-300 overflow-hidden flex flex-col min-h-[500px]">
                <div className="bg-red-50 p-4 border-b border-red-100 flex justify-between items-center">
                  <h3 className="font-bold text-red-700 flex items-center gap-2 text-lg">
                    <Icon name="package" size={24} />
                    {isAdmin
                      ? adminStep === 1
                        ? "B∆∞·ªõc 1: X·∫øp cam v√†o th√πng"
                        : "B∆∞·ªõc 2: Ch·ªçn th√πng b√°n"
                      : gameStep === 1
                      ? "B∆∞·ªõc 1: X·∫øp cam v√†o th√πng"
                      : "B∆∞·ªõc 2: Ch·ªçn th√πng c√≥ > 7 qu·∫£"}
                  </h3>
                  {isAdmin && (
                    <div className="flex gap-2">
                      <button
                        onClick={() => setAdminStep(1)}
                        className={`px-3 py-1 rounded text-sm font-medium ${
                          adminStep === 1
                            ? "bg-blue-600 text-white"
                            : "bg-gray-200 text-gray-700 hover:bg-gray-300"
                        }`}
                      >
                        B∆∞·ªõc 1
                      </button>
                      <button
                        onClick={() => setAdminStep(2)}
                        className={`px-3 py-1 rounded text-sm font-medium ${
                          adminStep === 2
                            ? "bg-blue-600 text-white"
                            : "bg-gray-200 text-gray-700 hover:bg-gray-300"
                        }`}
                      >
                        B∆∞·ªõc 2
                      </button>
                    </div>
                  )}
                  {!isAdmin && gameStep === 1 && (
                    <span className="text-sm text-gray-600 bg-white px-3 py-1 rounded-full">
                      üß∫ {createdBoxes.length} th√πng
                    </span>
                  )}
                </div>

                {/* B∆Ø·ªöC 1: T·∫°o bi·∫øn */}
                {((isAdmin && adminStep === 1) ||
                  (!isAdmin && gameStep === 1)) && (
                  <>
                    <div className="bg-blue-50 p-3 text-sm text-blue-800 text-center border-b border-blue-100">
                      üçä Click v√†o <strong>r·ªï cam</strong> b√™n d∆∞·ªõi ƒë·ªÉ x·∫øp v√†o
                      th√πng. B·∫•m <strong>"Th√™m th√πng"</strong> ƒë·ªÉ t·∫°o th√πng m·ªõi.
                      {isAdmin && (
                        <span className="ml-2 text-xs">
                          (Ch·∫ø ƒë·ªô xem tr∆∞·ªõc cho GV)
                        </span>
                      )}
                    </div>

                    <div className="p-6 flex-1 bg-blue-50/30 flex flex-col">
                      {/* C√°c bi·∫øn ƒë√£ t·∫°o */}
                      <div className="mb-4">
                        <div className="text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                          <Icon name="package" size={16} /> üß∫ C√°c th√πng cam c·ªßa
                          b·∫°n:
                        </div>
                        <div className="flex flex-wrap gap-3 min-h-[80px] p-4 bg-white rounded-lg border-2 border-dashed border-gray-300">
                          {createdBoxes.length === 0 ? (
                            <div className="w-full text-center text-gray-400 text-sm py-4">
                              üß∫ Ch∆∞a c√≥ th√πng n√†o. B·∫•m "Th√™m th√πng" ƒë·ªÉ b·∫Øt ƒë·∫ßu
                              x·∫øp cam!
                            </div>
                          ) : (
                            createdBoxes.map((box, idx) => (
                              <div
                                key={idx}
                                className="flex flex-col items-center"
                              >
                                <span className="text-[10px] text-gray-600 font-bold mb-1">
                                  Th√πng {idx}
                                </span>
                                <div
                                  className={`w-16 h-16 flex items-center justify-center rounded-lg border-2 font-bold text-xl ${
                                    box.value === null
                                      ? "bg-gray-100 border-dashed border-gray-400 text-gray-300"
                                      : "bg-green-100 border-green-500 text-green-700"
                                  }`}
                                  style={{
                                    backgroundImage: 'url(box.png)',
                                    backgroundSize: 'cover',
                                    backgroundPosition: 'center',
                                    textShadow: '0 0 4px white, 0 0 8px white'
                                  }}
                                >
                                  {box.value === null ? "?" : box.value}
                                </div>
                              </div>
                            ))
                          )}
                        </div>
                      </div>

                      {/* N√∫t Th√™m th√πng, X√≥a th√πng v√† Reset */}
                      <div className="flex gap-2 mb-4">
                        <button
                          onClick={handleAddBox}
                          disabled={hasSubmitted || isSubmitting}
                          className="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-bold flex items-center justify-center gap-2"
                        >
                          <Icon name="plus" size={20} /> Th√™m th√πng
                        </button>
                        <button
                          onClick={handleRemoveBox}
                          disabled={
                            hasSubmitted ||
                            isSubmitting ||
                            createdBoxes.length === 0
                          }
                          className="bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg font-bold flex items-center justify-center gap-2"
                          title="X√≥a th√πng cu·ªëi c√πng"
                        >
                          <Icon name="minus" size={20} />
                        </button>
                        <button
                          onClick={handleResetStep1}
                          disabled={
                            hasSubmitted ||
                            isSubmitting ||
                            createdBoxes.length === 0
                          }
                          className="bg-gray-400 hover:bg-gray-500 text-white py-2 px-4 rounded-lg font-bold"
                          title="X√≥a t·∫•t c·∫£ th√πng"
                        >
                          <Icon name="refresh-cw" size={20} />
                        </button>
                      </div>

                      {/* C√°c gi√° tr·ªã s·ªë */}
                      <div className="mb-4">
                        <div className="text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                          <Icon name="shopping-basket" size={16} /> üçä C√°c r·ªï
                          cam:
                          <span className="ml-2 px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold">
                            {gameStatus.generatedScores
                              ? gameStatus.generatedScores.length
                              : 0}{" "}
                            r·ªï
                          </span>
                          <span className="text-xs text-gray-500">
                            (ƒê√£ x·∫øp: {usedScoreIndices.size} r·ªï)
                          </span>
                        </div>
                        <div className="flex flex-wrap gap-3 p-4 bg-white rounded-lg border border-gray-300">
                          {gameStatus.generatedScores &&
                            gameStatus.generatedScores.map((score, idx) => (
                              <button
                                key={idx}
                                onClick={() => handleScoreClick(idx)}
                                disabled={
                                  usedScoreIndices.has(idx) ||
                                  hasSubmitted ||
                                  isSubmitting
                                }
                                className={`w-14 h-14 rounded-lg font-bold text-xl transition-all relative ${
                                  usedScoreIndices.has(idx)
                                    ? "bg-gray-200 text-gray-400 cursor-not-allowed opacity-50"
                                    : "bg-gradient-to-br from-orange-400 to-orange-600 hover:from-orange-500 hover:to-orange-700 text-white shadow-md hover:scale-110"
                                }`}
                              >
                                <div className="text-xs absolute top-0 right-0.5">
                                  üçä
                                </div>
                                {score}
                              </button>
                            ))}
                        </div>
                      </div>

                      {/* N√∫t X·∫øp xong */}
                      <button
                        onClick={handleFinishCreating}
                        disabled={hasSubmitted || isSubmitting}
                        className="bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-bold text-lg flex items-center justify-center gap-2 shadow-lg"
                      >
                        <Icon name="check-circle" size={24} /> ‚úÖ X·∫øp xong -
                        Sang b∆∞·ªõc 2
                      </button>

                      <div className="h-8 mt-4 text-center text-red-600 font-bold">
                        {message}
                      </div>
                    </div>
                  </>
                )}

                {/* B∆Ø·ªöC 2: Ch·ªçn s·ªë > 7 */}
                {((isAdmin && adminStep === 2) ||
                  (!isAdmin && gameStep === 2)) && (
                  <>
                    <div className="bg-yellow-50 p-3 text-sm text-yellow-800 text-center border-b border-yellow-100">
                      üéØ H√£y ch·ªçn t·∫•t c·∫£ c√°c <strong>th√πng cam</strong> c√≥{" "}
                      <strong>nhi·ªÅu h∆°n 7 qu·∫£</strong> ƒë·ªÉ b√°n tr∆∞·ªõc!
                      {isAdmin && (
                        <span className="ml-2 text-xs">
                          (Ch·∫ø ƒë·ªô xem tr∆∞·ªõc cho GV)
                        </span>
                      )}
                    </div>

                    <div className="p-6 flex-1 bg-red-50/30 flex flex-col items-center">
                      <div className="flex flex-wrap gap-4 justify-center">
                        {(isAdmin
                          ? gameStatus.generatedScores || []
                          : scores
                        ).map((score, idx) => {
                          const isSelected = leftSelected.has(idx);
                          return (
                            <button
                              key={`var-${idx}`}
                              onClick={() => handleLeftClick(idx, score)}
                              disabled={
                                (!gameStatus.isActive && !isAdmin) ||
                                (hasSubmitted && !isAdmin) ||
                                isSubmitting
                              }
                              className={`
                          w-16 h-16 flex flex-col items-center justify-center rounded-lg transition-all transform select-none shadow-sm border relative
                          ${
                            isSelected
                              ? "bg-green-500 text-white border-green-600 scale-110 shadow-lg"
                              : "bg-orange-50 text-gray-800 border-orange-300 hover:border-green-400 hover:bg-green-50"
                          }
                        `}
                            >
                              <span className="text-[9px] text-gray-600 font-bold absolute top-0.5 left-1">
                                T{idx}
                              </span>
                              <span className="text-2xl font-bold">
                                {score}
                              </span>
                            </button>
                          );
                        })}
                      </div>
                      <div className="h-8 mt-4 text-red-600 font-bold">
                        {message}
                      </div>
                    </div>
                  </>
                )}
              </div>

              {isAdmin && showAnswer && (
                <div className="bg-white rounded-xl shadow-lg border-2 border-blue-300 overflow-hidden flex flex-col">
                  <div className="bg-blue-50 p-4 border-b border-blue-100">
                    <h3 className="font-bold text-blue-700 flex items-center gap-2 text-lg">
                      <Icon name="search" size={24} /> üí° D√πng List ƒë·ªÉ x·ª≠ l√Ω t·ª±
                      ƒë·ªông
                    </h3>
                  </div>

                  <div className="p-6 flex-1 bg-blue-50/30 flex flex-col items-center">
                    <div className="w-full overflow-x-auto pb-4">
                      <div className="flex items-end min-w-max bg-gray-900 p-6 rounded-xl shadow-inner border border-gray-700">
                        <span className="text-green-400 font-mono mr-3 text-2xl self-center">
                          A = [
                        </span>
                        {scores.map((score, idx) => (
                          <div
                            key={`list-${idx}`}
                            className="flex flex-col items-center mx-1 group relative"
                          >
                            <span className="text-[10px] text-gray-400 font-mono mb-1 opacity-70 group-hover:opacity-100 transition-opacity">
                              {idx}
                            </span>
                            <div
                              className={`
                            w-10 h-12 flex items-center justify-center font-mono text-lg rounded border
                            transition-all duration-300 relative z-10
                            ${
                              rightStatus === "done" && score > 7
                                ? "bg-green-600 text-white font-bold border-green-400 shadow-[0_0_15px_rgba(34,197,94,0.6)] transform -translate-y-2 scale-110 z-20"
                                : "bg-gray-800 text-gray-300 border-gray-600 group-hover:bg-gray-700"
                            }
                          `}
                            >
                              {score}
                            </div>
                          </div>
                        ))}
                        <span className="text-green-400 font-mono ml-3 text-2xl self-center">
                          ]
                        </span>
                      </div>
                    </div>

                    <div className="mt-8 w-full max-w-md">
                      <div className="bg-gray-900 rounded-lg p-4 font-mono text-sm shadow-2xl relative border border-gray-700">
                        <div className="text-gray-400 italic mb-2 border-b border-gray-700 pb-2">
                          # Python Code:
                        </div>
                        <div className="text-purple-400">
                          for <span className="text-white">i</span> in{" "}
                          <span className="text-blue-300">range</span>(
                          <span className="text-blue-300">len</span>(A)):
                        </div>
                        <div className="pl-4">
                          <span className="text-purple-400">if</span> A[i] {">"}{" "}
                          7:
                        </div>
                        <div className="pl-8">
                          <span className="text-blue-300">print</span>(A[i])
                        </div>

                        <button
                          onClick={handleRightAction}
                          className="absolute right-2 bottom-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-1 rounded text-xs font-bold shadow-lg"
                        >
                          CH·∫†Y CODE
                        </button>
                      </div>

                      {/* K·∫øt qu·∫£ output */}
                      {rightStatus === "done" && (
                        <div className="mt-4 bg-gray-900 rounded-lg p-4 border border-green-500 shadow-xl animate-pulse">
                          <div className="text-green-400 text-xs font-mono mb-2">
                            Output:
                          </div>
                          <div className="space-y-1">
                            {scores.map((score, idx) =>
                              score > 7 ? (
                                <div
                                  key={idx}
                                  className="text-green-300 font-mono text-sm"
                                >
                                  {score}
                                </div>
                              ) : null
                            )}
                          </div>
                          <div className="mt-3 pt-3 border-t border-green-700 text-yellow-400 font-mono text-sm font-bold">
                            ‚Üí T·ªïng c·ªông: {scores.filter((s) => s > 7).length}{" "}
                            th√πng üß∫
                          </div>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              )}
            </div>
          </div>
        );
      };

      // Render app
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<ListVsVars />);
    </script>
  </body>
</html>
